"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Schema_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Schema"));
class default_1 extends Schema_1.default {
    constructor() {
        super(...arguments);
        this.tableName = 'api_tokens';
    }
    async up() {
        this.schema.createTable(this.tableName, (table) => {
            table.increments('id').primary();
            table.integer('user_id').unsigned().references('id').inTable('users').onDelete('CASCADE');
            table.string('name').notNullable();
            table.string('type').notNullable();
            table.string('token', 64).notNullable().unique();
            table.timestamp('expires_at').nullable();
            table.timestamps(true, true);
        });
    }
    async down() {
        this.schema.dropTable(this.tableName);
    }
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcwNjcyNjk3NzY2Ml9hcGlfdG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiMTcwNjcyNjk3NzY2Ml9hcGlfdG9rZW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdUZBQWlEO0FBRWpELGVBQXFCLFNBQVEsZ0JBQVU7SUFBdkM7O1FBQ1ksY0FBUyxHQUFHLFlBQVksQ0FBQTtJQWlCcEMsQ0FBQztJQWZRLEtBQUssQ0FBQyxFQUFFO1FBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2hELEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7WUFDaEMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUN6RixLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ2xDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDbEMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUE7WUFDaEQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUN4QyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM5QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSTtRQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0NBQ0Y7QUFsQkQsNEJBa0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VTY2hlbWEgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvU2NoZW1hJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIEJhc2VTY2hlbWEge1xuICBwcm90ZWN0ZWQgdGFibGVOYW1lID0gJ2FwaV90b2tlbnMnXG5cbiAgcHVibGljIGFzeW5jIHVwKCkge1xuICAgIHRoaXMuc2NoZW1hLmNyZWF0ZVRhYmxlKHRoaXMudGFibGVOYW1lLCAodGFibGUpID0+IHtcbiAgICAgIHRhYmxlLmluY3JlbWVudHMoJ2lkJykucHJpbWFyeSgpXG4gICAgICB0YWJsZS5pbnRlZ2VyKCd1c2VyX2lkJykudW5zaWduZWQoKS5yZWZlcmVuY2VzKCdpZCcpLmluVGFibGUoJ3VzZXJzJykub25EZWxldGUoJ0NBU0NBREUnKVxuICAgICAgdGFibGUuc3RyaW5nKCduYW1lJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCd0eXBlJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCd0b2tlbicsIDY0KS5ub3ROdWxsYWJsZSgpLnVuaXF1ZSgpXG4gICAgICB0YWJsZS50aW1lc3RhbXAoJ2V4cGlyZXNfYXQnKS5udWxsYWJsZSgpXG4gICAgICB0YWJsZS50aW1lc3RhbXBzKHRydWUsIHRydWUpXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkb3duKCkge1xuICAgIHRoaXMuc2NoZW1hLmRyb3BUYWJsZSh0aGlzLnRhYmxlTmFtZSlcbiAgfVxufVxuIl19