"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Route_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Route"));
const User_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/User"));
Route_1.default.get('/', async () => {
    User_1.default.create({
        email: 'admin@admin.com',
        password: '123456',
        tipo: 'admin',
    });
});
Route_1.default.post('/getToken', async ({ request, response, auth }) => {
    const email = request.input('email');
    const password = request.input('password');
    const user = await User_1.default.findBy('email', email);
    if (user === null) {
        return response.notFound('Usuario n√£o encontrado');
    }
    const token = await auth.use('api').attempt(email, password);
    return response.ok(token);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0Esb0ZBQTBDO0FBQzFDLGlGQUFrQztBQUVsQyxlQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLElBQUksRUFBRTtJQUN4QixjQUFJLENBQUMsTUFBTSxDQUFDO1FBQ1YsS0FBSyxFQUFFLGlCQUFpQjtRQUN4QixRQUFRLEVBQUUsUUFBUTtRQUNsQixJQUFJLEVBQUUsT0FBTztLQUNkLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBO0FBRUYsZUFBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQWUsRUFBRSxFQUFFO0lBQ3pFLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEMsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUUxQyxNQUFNLElBQUksR0FBRyxNQUFNLGNBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBRTlDLElBQUksSUFBSSxLQUFLLElBQUksRUFBRTtRQUNqQixPQUFPLFFBQVEsQ0FBQyxRQUFRLENBQUMsd0JBQXdCLENBQUMsQ0FBQTtLQUNuRDtJQUVELE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBRTVELE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUMzQixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDb250ZXh0IH0gZnJvbSAnQGFkb25pc2pzL2h0dHAtc2VydmVyL2J1aWxkL3NyYy9IdHRwQ29udGV4dCdcbmltcG9ydCBSb3V0ZSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL1JvdXRlJ1xuaW1wb3J0IFVzZXIgZnJvbSAnQXBwL01vZGVscy9Vc2VyJ1xuXG5Sb3V0ZS5nZXQoJy8nLCBhc3luYyAoKSA9PiB7XG4gIFVzZXIuY3JlYXRlKHtcbiAgICBlbWFpbDogJ2FkbWluQGFkbWluLmNvbScsXG4gICAgcGFzc3dvcmQ6ICcxMjM0NTYnLFxuICAgIHRpcG86ICdhZG1pbicsXG4gIH0pXG59KVxuXG5Sb3V0ZS5wb3N0KCcvZ2V0VG9rZW4nLCBhc3luYyAoeyByZXF1ZXN0LCByZXNwb25zZSwgYXV0aCB9OiBIdHRwQ29udGV4dCkgPT4ge1xuICBjb25zdCBlbWFpbCA9IHJlcXVlc3QuaW5wdXQoJ2VtYWlsJylcbiAgY29uc3QgcGFzc3dvcmQgPSByZXF1ZXN0LmlucHV0KCdwYXNzd29yZCcpXG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5KCdlbWFpbCcsIGVtYWlsKVxuXG4gIGlmICh1c2VyID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLm5vdEZvdW5kKCdVc3VhcmlvIG7Do28gZW5jb250cmFkbycpXG4gIH1cblxuICBjb25zdCB0b2tlbiA9IGF3YWl0IGF1dGgudXNlKCdhcGknKS5hdHRlbXB0KGVtYWlsLCBwYXNzd29yZClcblxuICByZXR1cm4gcmVzcG9uc2Uub2sodG9rZW4pXG59KVxuIl19